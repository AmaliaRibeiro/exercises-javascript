<!DOCTYPE html>
<html>
    <head>

    </head>
    <body>
        <canvas id="lluvia-canvas" width="800" height="800">
        </canvas>
        <script type="text/javascript">

            canvas = document.getElementById("lluvia-canvas").getContext("2d")

            canvas.fillStyle = "blue" // rgb("0-255","0-255","0-255") red green blue

            var y  = 10;
            var x = 10;
            var fps = 800;
            var numeroDeGotas = 50;
            var gotas = [];

            var cleanWindow = () => {
                canvas.fillStyle = "white";
                canvas.fillRect(0,0,800,800)
            }

            var paintDrop = (x, y) => {
                canvas.fillStyle = "blue"                
                canvas.fillRect(x, y, 10,10)
            }
            var inicializadorDeGotas = () => {
              for(var i = 0; i < numeroDeGotas; i++) {
                var randomX = Math.random() * 800;
                var randomY = Math.random() * 800;
                gotas.push({x: randomX, y: randomY})
               }
            }

            var paintDrops = () => {
               
                // dibujar varias gotas en horizontal
                for (var i = 0; i < gotas.length; i++) { //recorre el array de gotas
                        var objetoGota = gotas[i];  //se guarda en una variable el objeto gota.
                        paintDrop(objetoGota.x, objetoGota.y);//llama a la funcion pasando las propiedades 
                                                              //x e y de esa gota especifica, para que se 
                                                              //dibuje en esa posicion especifica.
                        objetoGota.y += 50; //incrementa la posicion par a pasar a la siguiente fila

                        if (objetoGota.y >= 800) {
                            objetoGota.y = 0;
                            objetoGota.x = Math.random() * 800;
                        }
                    }
                                  
                } 
            
            var loop = ()=> {

                cleanWindow() 

                paintDrops()

                setTimeout(loop,fps)

            }
            inicializadorDeGotas()
            loop()

        //obtener el objeto del array,
         //imprimir la gota con esa posicion 
         //actualizar el eje Y. Y asi para todos los elementos del array.
        </script>
    </body>
</html>